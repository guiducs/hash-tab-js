!function($){"use strict";function tab(el,options){this.defaults=$.extend({segment:0,initTab:0,showInitTab:!0,filterClass:"",activeLinkClass:"active",contentClass:"",speedAnimation:300,beforeTabActive:function(){},beforeTabInactive:function(){},afterTabActive:function(){},afterTabInactive:function(){}},options),this.$target=null,this.$wrapper=$(el),this.defaults.filterClass=this.defaults.filterClass?-1!==this.defaults.filterClass.indexOf(".")?"a"+this.defaults.filterClass:"a."+this.defaults.filterClass:"a",this.$links=this.$wrapper.find(this.defaults.filterClass)}tab.prototype={init:function(){this.hideElements(),this.bindUI(),this.run()},hideElements:function(){var self=this,contentId="";self.$links.each(function(i){contentId="#"+self.getContentId(this.getAttribute("href").split("#")[1]),$(this).attr("data-content-id",contentId),self.defaults.showInitTab&&null==self.$target?self.defaults.initTab!=i&&$(contentId).hide():$(contentId).hide()})},bindUI:function(){var self=this;$(window).hashchange(function(){var hash=window.location.hash;hash&&(self.$target=self.$links.filter("[href$='"+self.getHash(hash)+"']"),self.$target.length&&!self.$target.hasClass(self.defaults.activeLinkClass)&&self.run())})},run:function(){this.getSegment()?this.changeTab():this.defaults.showInitTab&&this.activeInitTab()},getHash:function(hash){return hash?-1===hash.indexOf("/")?0==this.defaults.segment?hash:"":(hash=hash.split("/"),0==this.defaults.segment?hash[0]:hash.slice(0,this.defaults.segment+1).join("/")):""},getSegment:function(){return this.$target&&this.$target.length?this.defaults.segment>0&&-1!==this.$target.attr("href").indexOf("/")?this.$target.attr("href").split("/")[this.defaults.segment]:this.$target.attr("href"):void 0},getContentId:function(hash){return"undefined"!=typeof hash?(hash=hash.replace("!",""),this.defaults.segment>0&&-1!==hash.indexOf("/")?hash.split("/")[this.defaults.segment]:hash):void 0},changeTab:function(){!this.defaults.showInitTab&&this.$target.hasClass(this.defaults.activeLinkClass)?this.inactiveTab(this.$target):(this.inactiveTab(this.$links.filter("."+this.defaults.activeLinkClass)),this.activeTab(this.$target))},activeTab:function(tab){tab.length&&(tab.addClass(this.defaults.activeLinkClass),this.defaults.beforeTabActive(tab,this.$links.index(tab)),$(tab.attr("data-content-id")).stop(!0,!0).fadeIn(this.defaults.speedAnimation),this.defaults.afterTabActive(tab,this.$links.index(tab)))},inactiveTab:function(tab){tab.length&&(tab.removeClass(this.defaults.activeLinkClass),this.defaults.beforeTabInactive(tab,this.$links.index(tab)),$(tab.attr("data-content-id")).stop(!0,!0).fadeOut(this.defaults.speedAnimation),this.defaults.afterTabInactive(tab,this.$links.index(tab)))},activeInitTab:function(){this.inactiveTab(this.$links.filter("."+this.defaults.activeLinkClass)),this.$links.eq(this.defaults.initTab).length&&this.activeTab(this.$links.eq(this.defaults.initTab))}},$.fn.tab=function(options){return this.each(function(){new tab(this,options).init()})}}(jQuery);